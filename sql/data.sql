-- Jeu de données pour tester l'application bancaire

-- Types de prêt
INSERT INTO type_pret (libelle, taux, delai_debut_remboursement)
VALUES ('Pret Immobilier', 3.50, 0),
       ('Pret Auto', 4.80, 1),
       ('Pret Personnel', 7.20, 0);

-- Modalités de remboursement
INSERT INTO modalite (libelle, nb_mois)
VALUES ('Mensuel', 1),
       ('Trimestriel', 3),
       ('Annuelle', 12);

-- Statuts de prêt
INSERT INTO enum_status_pret (libelle)
VALUES ('En attente'),
       ('Accepte'),
       ('Refuse'),
       ('En cours'),
       ('Termine');

-- Clients de test
INSERT INTO client (email, prenom, nom, mdp)
VALUES ('jean.dupont@email.com', 'Jean', 'Dupont', '$2y$10$hash123'),
       ('marie.martin@email.com', 'Marie', 'Martin', '$2y$10$hash456'),
       ('pierre.bernard@email.com', 'Pierre', 'Bernard', '$2y$10$hash789');

-- Comptes clients
INSERT INTO compte_client (numero, date_creation, client_id)
VALUES ('CPT001', '2024-01-15', 1),
       ('CPT002', '2024-02-10', 2),
       ('CPT003', '2024-03-05', 3);

-- Prêts de test
INSERT INTO pret (duree_remboursement, montant, date_demande, modalite_id, type_pret_id, compte_client_id, taux_assurance, assurance_par_mois)
VALUES (12, 12000.00, '2024-01-20', 1, 3, 1, 0.50, TRUE),  -- Prêt personnel 12 mois
       (24, 50000.00, '2024-02-15', 1, 2, 2, 0.30, TRUE),  -- Prêt auto 24 mois
       (36, 8000.00, '2024-03-10', 1, 3, 3, 0.00, FALSE);  -- Prêt personnel 36 mois sans assurance

-- Statuts des prêts (tous acceptés)
INSERT INTO status_pret (date_status, enum_pret_id, pret_id)
VALUES ('2024-01-25', 2, 1),
       ('2024-02-20', 2, 2),
       ('2024-03-15', 2, 3);

-- Échéancier pour le prêt 1 : 12000€, 7.20% annuel (0.6% mensuel), 12 mois, assurance 0.5% mensuel
-- Mensualité constante = 1053.25€, Assurance = 60€/mois (0.5% de 12000)
INSERT INTO paiement_modalite (date_prevu_paiment, montant_prevu, mensualite, interet, amortissement, assurance, montant_restant, pret_id)
VALUES ('2024-02-25', 1113.25, 1053.25, 72.00, 981.25, 60.00, 11018.75, 1),
       ('2024-03-25', 1113.25, 1053.25, 66.11, 987.14, 60.00, 10031.61, 1),
       ('2024-04-25', 1113.25, 1053.25, 60.19, 993.06, 60.00, 9038.55, 1),
       ('2024-05-25', 1113.25, 1053.25, 54.23, 999.02, 60.00, 8039.53, 1),
       ('2024-06-25', 1113.25, 1053.25, 48.24, 1005.01, 60.00, 7034.52, 1),
       ('2024-07-25', 1113.25, 1053.25, 42.21, 1011.04, 60.00, 6023.48, 1),
       ('2024-08-25', 1113.25, 1053.25, 36.14, 1017.11, 60.00, 5006.37, 1),
       ('2024-09-25', 1113.25, 1053.25, 30.04, 1023.21, 60.00, 3983.16, 1),
       ('2024-10-25', 1113.25, 1053.25, 23.90, 1029.35, 60.00, 2953.81, 1),
       ('2024-11-25', 1113.25, 1053.25, 17.72, 1035.53, 60.00, 1918.28, 1),
       ('2024-12-25', 1113.25, 1053.25, 11.51, 1041.74, 60.00, 876.54, 1),
       ('2025-01-25', 936.79, 876.79, 5.26, 871.53, 60.00, 5.01, 1);

-- Échéancier pour le prêt 2 : 50000€, 4.80% annuel (0.4% mensuel), 24 mois, assurance 0.3% mensuel
-- Mensualité constante = 2256.09€, Assurance = 150€/mois (0.3% de 50000)
INSERT INTO paiement_modalite (date_prevu_paiment, montant_prevu, mensualite, interet, amortissement, assurance, montant_restant, pret_id)
VALUES ('2024-03-20', 2406.09, 2256.09, 200.00, 2056.09, 150.00, 47943.91, 2),
       ('2024-04-20', 2406.09, 2256.09, 191.78, 2064.31, 150.00, 45879.60, 2),
       ('2024-05-20', 2406.09, 2256.09, 183.52, 2072.57, 150.00, 43807.03, 2),
       ('2024-06-20', 2406.09, 2256.09, 175.23, 2080.86, 150.00, 41726.17, 2),
       ('2024-07-20', 2406.09, 2256.09, 166.90, 2089.19, 150.00, 39636.98, 2),
       ('2024-08-20', 2406.09, 2256.09, 158.55, 2097.54, 150.00, 37539.44, 2),
       ('2024-09-20', 2406.09, 2256.09, 150.16, 2105.93, 150.00, 35433.51, 2),
       ('2024-10-20', 2406.09, 2256.09, 141.73, 2114.36, 150.00, 33319.15, 2),
       ('2024-11-20', 2406.09, 2256.09, 133.28, 2122.81, 150.00, 31196.34, 2),
       ('2024-12-20', 2406.09, 2256.09, 124.79, 2131.30, 150.00, 29065.04, 2),
       ('2025-01-20', 2406.09, 2256.09, 116.26, 2139.83, 150.00, 26925.21, 2),
       ('2025-02-20', 2406.09, 2256.09, 107.70, 2148.39, 150.00, 24776.82, 2),
       ('2025-03-20', 2406.09, 2256.09, 99.11, 2156.98, 150.00, 22619.84, 2),
       ('2025-04-20', 2406.09, 2256.09, 90.48, 2165.61, 150.00, 20454.23, 2),
       ('2025-05-20', 2406.09, 2256.09, 81.82, 2174.27, 150.00, 18279.96, 2),
       ('2025-06-20', 2406.09, 2256.09, 73.12, 2182.97, 150.00, 16096.99, 2),
       ('2025-07-20', 2406.09, 2256.09, 64.39, 2191.70, 150.00, 13905.29, 2),
       ('2025-08-20', 2406.09, 2256.09, 55.62, 2200.47, 150.00, 11704.82, 2),
       ('2025-09-20', 2406.09, 2256.09, 46.82, 2209.27, 150.00, 9495.55, 2),
       ('2025-10-20', 2406.09, 2256.09, 37.98, 2218.11, 150.00, 7277.44, 2),
       ('2025-11-20', 2406.09, 2256.09, 29.11, 2226.98, 150.00, 5050.46, 2),
       ('2025-12-20', 2406.09, 2256.09, 20.20, 2235.89, 150.00, 2814.57, 2),
       ('2026-01-20', 2406.09, 2256.09, 11.26, 2244.83, 150.00, 569.74, 2),
       ('2026-02-20', 721.97, 571.97, 2.28, 569.69, 150.00, 0.05, 2);

-- Échéancier pour le prêt 3 : 8000€, 7.20% annuel (0.6% mensuel), 36 mois, sans assurance
-- Mensualité constante = 248.31€
INSERT INTO paiement_modalite (date_prevu_paiment, montant_prevu, mensualite, interet, amortissement, assurance, montant_restant, pret_id)
VALUES ('2024-04-15', 248.31, 248.31, 48.00, 200.31, 0.00, 7799.69, 3),
       ('2024-05-15', 248.31, 248.31, 46.80, 201.51, 0.00, 7598.18, 3),
       ('2024-06-15', 248.31, 248.31, 45.59, 202.72, 0.00, 7395.46, 3),
       ('2024-07-15', 248.31, 248.31, 44.37, 203.94, 0.00, 7191.52, 3),
       ('2024-08-15', 248.31, 248.31, 43.15, 205.16, 0.00, 6986.36, 3),
       ('2024-09-15', 248.31, 248.31, 41.92, 206.39, 0.00, 6779.97, 3),
       ('2024-10-15', 248.31, 248.31, 40.68, 207.63, 0.00, 6572.34, 3),
       ('2024-11-15', 248.31, 248.31, 39.43, 208.88, 0.00, 6363.46, 3),
       ('2024-12-15', 248.31, 248.31, 38.18, 210.13, 0.00, 6153.33, 3),
       ('2025-01-15', 248.31, 248.31, 36.92, 211.39, 0.00, 5941.94, 3),
       ('2025-02-15', 248.31, 248.31, 35.65, 212.66, 0.00, 5729.28, 3),
       ('2025-03-15', 248.31, 248.31, 34.38, 213.93, 0.00, 5515.35, 3),
       ('2025-04-15', 248.31, 248.31, 33.09, 215.22, 0.00, 5300.13, 3),
       ('2025-05-15', 248.31, 248.31, 31.80, 216.51, 0.00, 5083.62, 3),
       ('2025-06-15', 248.31, 248.31, 30.50, 217.81, 0.00, 4865.81, 3),
       ('2025-07-15', 248.31, 248.31, 29.19, 219.12, 0.00, 4646.69, 3),
       ('2025-08-15', 248.31, 248.31, 27.88, 220.43, 0.00, 4426.26, 3),
       ('2025-09-15', 248.31, 248.31, 26.56, 221.75, 0.00, 4204.51, 3),
       ('2025-10-15', 248.31, 248.31, 25.23, 223.08, 0.00, 3981.43, 3),
       ('2025-11-15', 248.31, 248.31, 23.89, 224.42, 0.00, 3757.01, 3),
       ('2025-12-15', 248.31, 248.31, 22.54, 225.77, 0.00, 3531.24, 3),
       ('2026-01-15', 248.31, 248.31, 21.19, 227.12, 0.00, 3304.12, 3),
       ('2026-02-15', 248.31, 248.31, 19.82, 228.49, 0.00, 3075.63, 3),
       ('2026-03-15', 248.31, 248.31, 18.45, 229.86, 0.00, 2845.77, 3),
       ('2026-04-15', 248.31, 248.31, 17.07, 231.24, 0.00, 2614.53, 3),
       ('2026-05-15', 248.31, 248.31, 15.69, 232.62, 0.00, 2381.91, 3),
       ('2026-06-15', 248.31, 248.31, 14.29, 234.02, 0.00, 2147.89, 3),
       ('2026-07-15', 248.31, 248.31, 12.89, 235.42, 0.00, 1912.47, 3),
       ('2026-08-15', 248.31, 248.31, 11.47, 236.84, 0.00, 1675.63, 3),
       ('2026-09-15', 248.31, 248.31, 10.05, 238.26, 0.00, 1437.37, 3),
       ('2026-10-15', 248.31, 248.31, 8.62, 239.69, 0.00, 1197.68, 3),
       ('2026-11-15', 248.31, 248.31, 7.19, 241.12, 0.00, 956.56, 3),
       ('2026-12-15', 248.31, 248.31, 5.74, 242.57, 0.00, 713.99, 3),
       ('2027-01-15', 248.31, 248.31, 4.28, 244.03, 0.00, 469.96, 3),
       ('2027-02-15', 248.31, 248.31, 2.82, 245.49, 0.00, 224.47, 3),
       ('2027-03-15', 225.81, 225.81, 1.35, 224.46, 0.00, 0.01, 3);


drop database banque;
create database banque;
use banque;